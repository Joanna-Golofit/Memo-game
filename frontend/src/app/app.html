<div class="memory-game">
  <!-- NagÅ‚Ã³wek gry - BEZ dynamicznych elementÃ³w -->
  <header class="game-header">
    <h1 class="game-title">{{ title() }}</h1>
  </header>

  <!-- GÅ‚Ã³wna sekcja gry -->
  <main class="game-main">
    <!-- Panel gracza po lewej - Inka -->
    <div class="player-panel left-player" [class.active]="currentPlayer() === 0 && gamePhase() === 'playing'">
      <div class="player-name">Inka</div>
      <div class="score">â­ {{ player1Score() }}</div>
    </div>

    <!-- Plansza gry -->
    <div class="game-board">
      <div 
        class="card" 
        *ngFor="let card of cards()"
        [class.flipped]="card.isFlipped"
        [class.matched]="card.isMatched"
        (click)="onCardClick(card)"
      >
        <!-- PrzÃ³d karty (obrazek) -->
        <div class="card-front">
          <img 
            [src]="getImageUrl(card)" 
            [alt]="card.name"
            class="card-image"
          />
          <div class="card-name">{{ card.name }}</div>
        </div>
        
        <!-- TyÅ‚ karty -->
        <div class="card-back">
          <div class="card-pattern">?</div>
        </div>
      </div>
    </div>

    <!-- Panel gracza po prawej - Natan -->
    <div class="player-panel right-player" [class.active]="currentPlayer() === 1 && gamePhase() === 'playing'">
      <div class="player-name">Natan</div>
      <div class="score">ğŸ† {{ player2Score() }}</div>
    </div>
  </main>

  <!-- Przycisk restart -->
  <footer class="game-footer">
    <button 
      class="restart-btn"
      (click)="onRestartClick()"
      [class.pulse]="isGameFinished()"
    >
      <span *ngIf="isGameFinished()">ğŸ‰ Zagraj ponownie</span>
      <span *ngIf="!isGameFinished() && hasNoMatchedCards()">ğŸ”„ Nowe karty</span>
      <span *ngIf="!isGameFinished() && !hasNoMatchedCards()">ğŸ”„ Restart gry</span>
    </button>
  </footer>

  <!-- OVERLAY MESSAGES - nie wpÅ‚ywajÄ… na layout -->
  
  <!-- Preview countdown - NA DOLE -->
  <div class="overlay-message bottom-overlay" *ngIf="gamePhase() === 'preview'">
    <div class="preview-message">
      â±ï¸ ZapamiÄ™taj gdzie sÄ… pary! {{ previewTimeLeft() }}
    </div>
  </div>
  
  <!-- Gratulacje - NAD PLANSZÄ„ -->
  <div class="overlay-message center-overlay" *ngIf="isGameFinished()">
    <div class="finish-message">
      ğŸ‰ Gratulacje!<br>
      <span *ngIf="player1Score() > player2Score()">ğŸ† Wygrywa Inka!</span>
      <span *ngIf="player2Score() > player1Score()">ğŸ† Wygrywa Natan!</span>
      <span *ngIf="player1Score() === player2Score()">ğŸ¤ Remis!</span>
    </div>
  </div>

  <!-- Dialog restart -->
  <div class="restart-overlay" *ngIf="showRestartConfirm()">
    <div class="restart-dialog">
      <h3>ğŸ¤” Na pewno chcesz zaczÄ…Ä‡ od nowa?</h3>
      <p>Stracisz obecny postÄ™p w grze!</p>
      <div class="dialog-buttons">
        <button class="btn-cancel" (click)="cancelRestart()">
          âŒ Nie, graj dalej
        </button>
        <button class="btn-confirm" (click)="confirmRestart()">
          âœ… Tak, zacznij od nowa
        </button>
      </div>
    </div>
  </div>
</div>